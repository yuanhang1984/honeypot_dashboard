"use strict";

class JSControl extends ObjectFactory {
  /**
   * 构造函数
   * @param tag 标签
   */
  constructor(tag) {
    ////////////////////////////////////////////////////////////////////////////
    // [注释说明]父类构造函数。
    ////////////////////////////////////////////////////////////////////////////
    super();
    ////////////////////////////////////////////////////////////////////////////
    // [注释说明]标签。
    ////////////////////////////////////////////////////////////////////////////
    this.tag = tag;
    ////////////////////////////////////////////////////////////////////////////
    // [注释说明]单标签，类似：<img />。
    ////////////////////////////////////////////////////////////////////////////
    this.singleTag = this.checkSingleTag(this.tag);
  }

  /**
   * 检查是否为单标签
   * @param tag: 标签
   * return 单标签返回true;如果不是返回false;
   */
  checkSingleTag(tag) {
    let singleTags = ["base", "basefont", "br", "col", "embed", "frame", "hr", "img", "input", "keygen", "param", "source", "track"];
    for (let i = 0; i < singleTags.length; i++) {
      let s = singleTags[i];
      if (s == tag.toLowerCase()) {
        return true;
      }
    }
    return false;
  }

  /**
   * 生成代码
   */
  generateCode() {
    ////////////////////////////////////////////////////////////////////////////
    // [注释说明]属性代码。
    ////////////////////////////////////////////////////////////////////////////
    let attributeCode = "";
    for (let key in this.objectAttribute) {
      attributeCode += `
        ${key} = "${this.objectAttribute[key]}"
      `;
    }
    if (this.singleTag) {
      //////////////////////////////////////////////////////////////////////////
      // [注释说明]单标签。
      //////////////////////////////////////////////////////////////////////////
      this.objectCode = `
        <${this.tag} id = ${this.objectId} ${attributeCode} />
      `;
    } else {
      //////////////////////////////////////////////////////////////////////////
      // [注释说明]双标签。
      //////////////////////////////////////////////////////////////////////////
      this.objectCode = `
        <${this.tag} id = ${this.objectId} ${attributeCode}>${this.objectContent}</${this.tag}>
      `;
    }
  }
}
